<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Dataflow Analyzer</title>
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
</head>
<body>

  <!-- Top bar -->
  <header class="top-bar">
    <div class="top-title">Dataflow Analyzer</div>
    <div class="top-subtitle">Workflow Builder & Client Loan Analysis for Business Analysts</div>
  </header>

  <!-- Tabs -->
  <nav class="tab-bar">
    <button class="tab-button active" data-target="workflowSection">Workflow Builder</button>
    <button class="tab-button" data-target="analysisSection">Loan & Risk Analysis</button>
  </nav>

  <main>

    <!-- ===================== WORKFLOW BUILDER ===================== -->
    <section id="workflowSection" class="tab-section active">

      <div class="workflow-layout">

        <!-- LEFT TOOLBAR -->
        <aside class="sidebar">
          <h2 class="heading">Workflow Tools</h2>

          <div class="tool" draggable="true" data-type="start">● Start</div>
          <div class="tool" draggable="true" data-type="task">■ Task</div>
          <div class="tool" draggable="true" data-type="decision">◆ Decision</div>
          <div class="tool" draggable="true" data-type="api">⇄ API Step</div>
          <div class="tool" draggable="true" data-type="end">● End</div>

          <div class="section">
            <h3>Import Data</h3>
            <input type="file" id="csvUpload" accept=".csv">
            <p class="hint">Upload workflow CSV (Title,Type) to auto-generate steps.</p>
          </div>

          <div class="section">
            <h3>Run</h3>
            <button id="runButton" class="run-btn">Start Process</button>
            <p class="hint">Runs top-to-bottom & exports workflow files.</p>
          </div>
        </aside>

        <!-- CANVAS -->
        <div id="canvas">
          <div class="canvas-hint">
            Drag components here or import a CSV to build your workflow.
          </div>
        </div>

        <!-- RIGHT SIDEBAR -->
        <aside class="properties">
          <h2 class="heading">Step Properties</h2>

          <label>Title</label>
          <input type="text" id="prop-title">

          <label>Description</label>
          <textarea id="prop-desc"></textarea>

          <label>Owner / Team</label>
          <input type="text" id="prop-owner">

          <label>Estimated Duration</label>
          <input type="text" id="prop-time" placeholder="e.g., 2 hours">

          <button id="saveButton">Save Changes</button>
          <button id="deleteButton" class="delete-btn">Delete Step</button>
        </aside>

      </div>
    </section>

    <!-- ===================== LOAN & RISK ANALYSIS ===================== -->
    <section id="analysisSection" class="tab-section">

      <div class="analysis-page">

        <!-- Upload Section -->
        <section class="card upload-section">
          <h2>1. Upload Client Data</h2>
          <input type="file" id="dataFile" accept=".csv">
          <p class="hint">
            Expected columns:
            <code>client_id, client_name, loan_amount, amount_paid, due_date, last_payment_date, status</code>
          </p>
        </section>

        <!-- KPI Section -->
        <section class="card kpi-section" id="kpiSection" hidden>
          <h2>2. Portfolio Overview</h2>

          <div class="kpi-grid">
            <div class="kpi-card">
              <span class="kpi-label">Total Clients</span>
              <span class="kpi-value" id="kpiClients">-</span>
            </div>

            <div class="kpi-card">
              <span class="kpi-label">Total Loan Amount</span>
              <span class="kpi-value" id="kpiTotalLoan">-</span>
            </div>

            <div class="kpi-card">
              <span class="kpi-label">Total Outstanding</span>
              <span class="kpi-value" id="kpiOutstanding">-</span>
            </div>

            <div class="kpi-card kpi-warning">
              <span class="kpi-label">Overdue Clients</span>
              <span class="kpi-value" id="kpiOverdueClients">-</span>
            </div>

            <div class="kpi-card kpi-danger">
              <span class="kpi-label">Overdue Amount</span>
              <span class="kpi-value" id="kpiOverdueAmount">-</span>
            </div>
          </div>
        </section>

        <!-- Summary Section -->
        <section class="card summary-section" id="summarySection" hidden>
          <h2>3. Summary for Consultant</h2>
          <div id="summaryText" class="summary-box"></div>
        </section>

        <!-- Table Section -->
        <section class="card table-section" id="tableSection" hidden>
          <h2>4. High-Risk & Overdue Clients</h2>

          <table id="clientTable">
            <thead>
              <tr>
                <th>Client</th>
                <th>Loan Amount</th>
                <th>Outstanding</th>
                <th>Due Date</th>
                <th>Days Overdue</th>
                <th>Risk Level</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>

          <p class="hint">Only clients with outstanding or overdue amounts are listed.</p>
        </section>
        <section id="analysisSection" class="tab-section">

  <h2>Loan & Risk Analysis</h2>

  <div class="upload-box">
    <label for="dataFile">Upload CSV File:</label>
    <input type="file" id="dataFile" accept=".csv" />
  </div>

  <section id="kpiSection" hidden>
    <h3>Portfolio KPIs</h3>

    <div class="kpi-grid">
      <div class="kpi-card">
        <p class="kpi-title">Total Clients</p>
        <p id="kpiClients" class="kpi-value">0</p>
      </div>

      <div class="kpi-card">
        <p class="kpi-title">Total Loan Amount</p>
        <p id="kpiTotalLoan" class="kpi-value">₹0</p>
      </div>

      <div class="kpi-card">
        <p class="kpi-title">Total Outstanding</p>
        <p id="kpiOutstanding" class="kpi-value">₹0</p>
      </div>

      <div class="kpi-card">
        <p class="kpi-title">Overdue Clients</p>
        <p id="kpiOverdueClients" class="kpi-value">0</p>
      </div>

      <div class="kpi-card">
        <p class="kpi-title">Overdue Amount</p>
        <p id="kpiOverdueAmount" class="kpi-value">₹0</p>
      </div>
    </div>
  </section>

  <section id="summarySection" hidden>
    <h3>Summary Insights</h3>
    <p id="summaryText"></p>
  </section>

  <section id="tableSection" hidden>
    <h3>Client Risk Table</h3>

    <table id="clientTable">
      <thead>
        <tr>
          <th>Client</th>
          <th>Total Loan</th>
          <th>Outstanding</th>
          <th>Due Date</th>
          <th>Days Overdue</th>
          <th>Risk</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
 

</section>


      </div>
    </section>

  </main>

</body>
</html>
